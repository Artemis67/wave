(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{214:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return l}));var a=n(2),r=n(6),i=(n(0),n(313)),o={title:"Configuration"},c={unversionedId:"configuration",id:"configuration",isDocsHomePage:!1,title:"Configuration",description:"Configuring the server",source:"@site/docs/configuration.md",slug:"/configuration",permalink:"/wave/docs/configuration",editUrl:"https://github.com/h2oai/wave/edit/master/website/docs/configuration.md",version:"current",sidebar:"someSidebar",previous:{title:"Browser Testing",permalink:"/wave/docs/browser-testing"},next:{title:"Deployment",permalink:"/wave/docs/deployment"}},s=[{value:"Configuring the server",id:"configuring-the-server",children:[{value:"Command line options",id:"command-line-options",children:[]}]},{value:"Configuring your app",id:"configuring-your-app",children:[{value:"H2O_WAVE_APP_ADDRESS",id:"h2o_wave_app_address",children:[]},{value:"H2O_WAVE_APP_MODE",id:"h2o_wave_app_mode",children:[]},{value:"H2O_WAVE_ADDRESS",id:"h2o_wave_address",children:[]},{value:"H2O_WAVE_ACCESS_KEY_ID",id:"h2o_wave_access_key_id",children:[]},{value:"H2O_WAVE_ACCESS_KEY_SECRET",id:"h2o_wave_access_key_secret",children:[]},{value:"H2O_WAVE_INTERNAL_ADDRESS",id:"h2o_wave_internal_address",children:[]},{value:"H2O_WAVE_EXTERNAL_ADDRESS",id:"h2o_wave_external_address",children:[]},{value:"H2O_WAVE_CHECKPOINT_DIR",id:"h2o_wave_checkpoint_dir",children:[]}]},{value:"Web Analytics",id:"web-analytics",children:[{value:"Google Analytics",id:"google-analytics",children:[]}]}],p={rightToc:s};function l(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"configuring-the-server"},"Configuring the server"),Object(i.b)("h3",{id:"command-line-options"},"Command line options"),Object(i.b)("p",null,"Execute ",Object(i.b)("inlineCode",{parentName:"p"},"waved -help")," to see all available command line options:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),'$ ./waved -help\nUsage of ./waved:\n  -access-key-id string\n        default access key ID (default "access_key_id")\n  -access-key-secret string\n        default access key secret (default "access_key_secret")\n  -compact string\n        compact AOF log\n  -data-dir string\n        directory to store site data (default "./data")\n  -debug\n        enable debug mode (profiling, inspection, etc.)\n  -init string\n        initialize site content from AOF log\n  -listen string\n        listen on this address (default ":10101")\n  -oidc-client-id string\n        OIDC client ID\n  -oidc-client-secret string\n        OIDC client secret\n  -oidc-end-session-url string\n        OIDC end session URL\n  -oidc-provider-url string\n        OIDC provider URL\n  -oidc-redirect-url string\n        OIDC redirect URL\n  -tls-cert-file string\n        path to certificate file (TLS only)\n  -tls-key-file string\n        path to private key file (TLS only)\n  -version\n        print version and exit\n  -web-dir string\n        directory to serve web assets from (default "./www")\n')),Object(i.b)("h2",{id:"configuring-your-app"},"Configuring your app"),Object(i.b)("p",null,"Your Wave application is an ASGI server. When you run your app during development, the app server runs at ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://127.0.0.1:8000/"}),"http://127.0.0.1:8000/")," by default (localhost, port 8000), and assumes that your Wave server is running at ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://127.0.0.1:10101/"}),"http://127.0.0.1:10101/")," (localhost, port 10101). The ",Object(i.b)("inlineCode",{parentName:"p"},"wave run")," command automatically picks another available port if ",Object(i.b)("inlineCode",{parentName:"p"},"8000")," is not available. "),Object(i.b)("p",null,"The Wave server and apps communicate with each other using RPC over persistent HTTP connections."),Object(i.b)("p",null,"For production deployments, you'll want to configure which port your app listens to, how it can access the Wave server, and how the Wave server can access your app."),Object(i.b)("p",null,"You can use the following environment variables to configure your app's server's behavior:"),Object(i.b)("h3",{id:"h2o_wave_app_address"},"H2O_WAVE_APP_ADDRESS"),Object(i.b)("p",null,"The public host/port of the app server. Defaults to ",Object(i.b)("inlineCode",{parentName:"p"},"http://127.0.0.1:8000"),". Set this variable if you are running your Wave server and your app on different machines or containers."),Object(i.b)("h3",{id:"h2o_wave_app_mode"},"H2O_WAVE_APP_MODE"),Object(i.b)("p",null,"The ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/wave/docs/realtime"}),"realtime sync mode")," of the app server. One of ",Object(i.b)("inlineCode",{parentName:"p"},"unicast")," (default), ",Object(i.b)("inlineCode",{parentName:"p"},"multicast"),", or ",Object(i.b)("inlineCode",{parentName:"p"},"broadcast"),"."),Object(i.b)("h3",{id:"h2o_wave_address"},"H2O_WAVE_ADDRESS"),Object(i.b)("p",null,"The public host/port of the Wave server. Defaults to ",Object(i.b)("inlineCode",{parentName:"p"},"http://127.0.0.1:10101"),". Set this variable if you are running the Wave server on a remote machine or container."),Object(i.b)("h3",{id:"h2o_wave_access_key_id"},"H2O_WAVE_ACCESS_KEY_ID"),Object(i.b)("p",null,"The API access key ID to use for communicating with the Wave server."),Object(i.b)("h3",{id:"h2o_wave_access_key_secret"},"H2O_WAVE_ACCESS_KEY_SECRET"),Object(i.b)("p",null,"The API access key secret to use for communicating with the Wave server."),Object(i.b)("h3",{id:"h2o_wave_internal_address"},"H2O_WAVE_INTERNAL_ADDRESS"),Object(i.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"Deprecated")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"This environment variable will be removed in v1.0."))),Object(i.b)("p",null,"The local host/port on which the app server should listen. Defaults to ",Object(i.b)("inlineCode",{parentName:"p"},"http://127.0.0.1:8000"),". For example, if you want your app to listen on a specific port, execute your app as follows (replace ",Object(i.b)("inlineCode",{parentName:"p"},"66666")," with a port number of your choice):"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"$ H2O_WAVE_INTERNAL_ADDRESS=ws://127.0.0.1:66666 ./venv/bin/python my_app.py\n")),Object(i.b)("h3",{id:"h2o_wave_external_address"},"H2O_WAVE_EXTERNAL_ADDRESS"),Object(i.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"Deprecated")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Specify ",Object(i.b)("inlineCode",{parentName:"p"},"H2O_WAVE_APP_ADDRESS")," instead."))),Object(i.b)("p",null,"The public host/port of the app server. Defaults to ",Object(i.b)("inlineCode",{parentName:"p"},"http://127.0.0.1:8000"),". Set this variable if you are running your Wave server and your app on different machines or containers."),Object(i.b)("h3",{id:"h2o_wave_checkpoint_dir"},"H2O_WAVE_CHECKPOINT_DIR"),Object(i.b)("p",null,"The directory to save/load application and session state. Enables checkpointing. If set, the app saves the contents of ",Object(i.b)("inlineCode",{parentName:"p"},"q.app")," and ",Object(i.b)("inlineCode",{parentName:"p"},"q.user")," before exiting. When restarted, the contents of ",Object(i.b)("inlineCode",{parentName:"p"},"q.app")," and ",Object(i.b)("inlineCode",{parentName:"p"},"q.user")," are restored. The directory is automatically created if it does not exist. "),Object(i.b)("p",null,"You can use checkpointing as a simple way to save/load your app's data while prototyping."),Object(i.b)("p",null,"The checkpoint file is named ",Object(i.b)("inlineCode",{parentName:"p"},"h2o_wave.checkpoint"),", and is serialized using Python's ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.python.org/3/library/pickle.html"}),"pickle")," protocol. Due to the nature of the ",Object(i.b)("inlineCode",{parentName:"p"},"pickle")," format, checkpointing is only guaranteed to work if the Python version and the versions of your app's dependencies are a perfect match, down to the patch version. In other words, do not expect checkpointing to work if an app is restarted using a newer/older Python version or a newer/older package. If you use checkpointing, it is recommended that you explicitly use ",Object(i.b)("inlineCode",{parentName:"p"},"==")," to set the ",Object(i.b)("inlineCode",{parentName:"p"},"major.minor.patch")," version of every package in your app's ",Object(i.b)("inlineCode",{parentName:"p"},"requirements.txt")," or ",Object(i.b)("inlineCode",{parentName:"p"},"setup.py"),"."),Object(i.b)("h2",{id:"web-analytics"},"Web Analytics"),Object(i.b)("p",null,"You can configure your app's web pages to send basic usage information to a third-party web analytics or tracking site. This lets you measure and analyze how users are interacting with various parts of your app."),Object(i.b)("p",null,"By default, Wave apps do not load any third-party trackers or capture usage data. Third-party trackers have to be enabled explicitly by the application's author, and are loaded on-demand."),Object(i.b)("p",null,"Once enabled, your app's UI will send events every time the user performs some kind of action that triggers a request from the browser to your app. Only two kinds of information are sent to the third-party trackers:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"The names of the elements that were possibly interacted with (and not values). For example, if a button named ",Object(i.b)("inlineCode",{parentName:"li"},"foo")," was clicked on, the value ",Object(i.b)("inlineCode",{parentName:"li"},"foo=true")," is tracked."),Object(i.b)("li",{parentName:"ul"},"The hash part of the URL, if any. For example if the page ",Object(i.b)("inlineCode",{parentName:"li"},"/foo/bar")," was navigated to, the value ",Object(i.b)("inlineCode",{parentName:"li"},"#=/foo/bar")," is tracked.")),Object(i.b)("h3",{id:"google-analytics"},"Google Analytics"),Object(i.b)("p",null,"To enable usage tracking via Google Analytics, create and set a ",Object(i.b)("inlineCode",{parentName:"p"},"ui.tracker()")," on your page's meta card, with the ",Object(i.b)("inlineCode",{parentName:"p"},"id")," set to the measurement ID of your web property."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-py",metastring:"{2}","{2}":!0}),"q.page['meta'] = ui.meta_card('',\n    tracker=ui.tracker(type=ui.TrackerType.GA, id='G-XXXXXXXXXX')\n)\n")))}l.isMDXComponent=!0},313:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),l=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},d=function(e){var t=l(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(n),u=a,h=d["".concat(o,".").concat(u)]||d[u]||b[u]||i;return n?r.a.createElement(h,c(c({ref:t},p),{},{components:n})):r.a.createElement(h,c({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var p=2;p<i;p++)o[p]=n[p];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);